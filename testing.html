

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Testing &mdash; Limelight FTC Bridge  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About the project</a></li>
<li class="toctree-l1"><a class="reference internal" href="considerations.html">Design considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Testing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ouside-tests">Ouside tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inside-tests">Inside tests</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Limelight FTC Bridge</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Testing</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com//nadegelemperiere-robotics/limenurse/blob/testing.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="testing">
<h1>Testing<a class="headerlink" href="#testing" title="Link to this heading"></a></h1>
<p>Each installation step comes with its set of tests to make sure <strong>LimeNurse</strong> works as expected</p>
<section id="ouside-tests">
<h2>Ouside tests<a class="headerlink" href="#ouside-tests" title="Link to this heading"></a></h2>
<p>Those tests shall be performed on the development laptop, or any laptop enabling connection of the Raspberry Pi on USB C and ethernet interfaces.
iOs and linux laptop shall have lsusb installed and sudo access.
Windows computer shall have usbview installed and in the path. It will also require enabling scripts on powershell</p>
<p>The first step shall be launched after the Data Link Layer deployment has been performed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Linux</span>
<span class="n">scripts</span><span class="o">/</span><span class="mi">01</span><span class="o">-</span><span class="n">configure</span><span class="o">-</span><span class="n">gadget</span><span class="o">-</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span> <span class="o">--</span><span class="n">source</span> <span class="n">outside</span> <span class="o">--</span><span class="n">platform</span> <span class="o">&lt;</span><span class="n">ios</span><span class="o">/</span><span class="n">linux</span><span class="o">&gt;</span>
<span class="c1"># Windows</span>
<span class="n">scripts</span><span class="o">/</span><span class="mi">01</span><span class="o">-</span><span class="n">configure</span><span class="o">-</span><span class="n">gadget</span><span class="o">-</span><span class="n">test</span><span class="o">.</span><span class="n">ps1</span> <span class="o">--</span><span class="n">source</span> <span class="n">outside</span> <span class="o">--</span><span class="n">platform</span> <span class="n">windows</span> <span class="c1"># Windows</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Look for an USB device matching limelight vendor and product</p></li>
<li><p>Gather its USB descriptors using lsusb</p></li>
<li><p>Compare them to real limelight ones</p></li>
</ul>
<p>PS : If the tests are not performed on a Linux laptop (or linux VM), the usb descriptors won’t be precise enough for the test to succeed.</p>
<p>The second step shall be launched after the Network Layer deployment has been performed
For the following tests, the pi needs to be connected to the test laptop both through USB and ethernet.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Linux</span>
<span class="n">scripts</span><span class="o">/</span><span class="mi">02</span><span class="o">-</span><span class="n">configure</span><span class="o">-</span><span class="n">network</span><span class="o">-</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span> <span class="o">--</span><span class="n">source</span> <span class="n">outside</span> <span class="o">--</span><span class="n">platform</span> <span class="o">&lt;</span><span class="n">ios</span><span class="o">/</span><span class="n">linux</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">user</span> <span class="o">&lt;</span><span class="n">ssh</span> <span class="n">user</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">password</span> <span class="o">&lt;</span><span class="n">ssh</span> <span class="n">password</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">hostname</span> <span class="n">limenurse</span>
<span class="c1"># Windows</span>
<span class="n">scripts</span><span class="o">/</span><span class="mi">02</span><span class="o">-</span><span class="n">configure</span><span class="o">-</span><span class="n">network</span><span class="o">-</span><span class="n">test</span><span class="o">.</span><span class="n">ps1</span> <span class="o">--</span><span class="n">source</span> <span class="n">outside</span> <span class="o">--</span><span class="n">platform</span> <span class="n">windows</span> <span class="o">--</span><span class="n">user</span> <span class="o">&lt;</span><span class="n">ssh</span> <span class="n">user</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">password</span> <span class="o">&lt;</span><span class="n">ssh</span> <span class="n">password</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">hostname</span> <span class="n">limenurse</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Check that limelight.local and limelight.eth.local names resolve to the configured IP (except for Windows)</p></li>
<li><p>Check that limenurse.local resolve to an IP (depending on the wifi router on which Pi is connected to wifi)</p></li>
<li><p>Check that the ethernet, USB and wlan IP are pingable</p></li>
<li><p>Check that limenurse.local is pingable</p></li>
<li><p>Check that limelight.local, limelight.eth.local are pingable (except for Windows)</p></li>
<li><p>Check that ssh connection on Pi is possible through ethernet and wlan IP</p></li>
<li><p>Check that ssh connection on Pi is possible through limenurse.local</p></li>
<li><p>Check that ssh connection on Pi is possible through limelight.eth.local (except for Windows)</p></li>
</ul>
<p>The third step shall be launched after the Transport Layer deployment has been performed
For the following tests, the limelight needs to be connected to the raspberry pi.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Linux / iOs</span>
<span class="n">scripts</span><span class="o">/</span><span class="mi">04</span><span class="o">-</span><span class="n">configure</span><span class="o">-</span><span class="n">routing</span><span class="o">-</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span> <span class="o">--</span><span class="n">source</span> <span class="n">outside</span> <span class="o">--</span><span class="n">platform</span> <span class="o">&lt;</span><span class="n">ios</span><span class="o">/</span><span class="n">linux</span><span class="o">&gt;</span>
<span class="c1"># Windows</span>
<span class="n">scripts</span><span class="o">/</span><span class="mi">04</span><span class="o">-</span><span class="n">configure</span><span class="o">-</span><span class="n">routing</span><span class="o">-</span><span class="n">test</span><span class="o">.</span><span class="n">ps1</span> <span class="o">--</span><span class="n">source</span> <span class="n">outside</span> <span class="o">--</span><span class="n">platform</span> <span class="n">windows</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Check that the PI is discoverable as a limelight on both ethernet and USB interfaces using python limelightlib</p></li>
<li><p>Check that the limelight Rest API is accessible on both ethernet and USB interfaces using python limelightlib</p></li>
<li><p>Check that the limelight webclient is accessible on both ethernet and USB interfaces</p></li>
</ul>
</section>
<section id="inside-tests">
<h2>Inside tests<a class="headerlink" href="#inside-tests" title="Link to this heading"></a></h2>
<p>Those tests shall be performed on the Pi.</p>
<p>The first step shall be launched after the Data Link deployment has been done</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scripts</span><span class="o">/</span><span class="mi">01</span><span class="o">-</span><span class="n">configure</span><span class="o">-</span><span class="n">gadget</span><span class="o">-</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span> <span class="o">--</span><span class="n">source</span> <span class="n">inside</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Check that configfs has been mounted</p></li>
<li><p>Check that libcomposite module has been installed</p></li>
<li><p>Check that descriptors files exists</p></li>
<li><p>Check that gadget has been bind to UDC drivers</p></li>
<li><p>Check that <a class="reference external" href="../data/limelight-gadget.service">limelight-gadget.service</a> is enabled and active</p></li>
<li><p>Check that the usb0 interface has the configured ip address</p></li>
</ul>
<p>The second step shall be launched after the Network deployment has been performed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scripts</span><span class="o">/</span><span class="mi">02</span><span class="o">-</span><span class="n">configure</span><span class="o">-</span><span class="n">network</span><span class="o">-</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span> <span class="o">--</span><span class="n">source</span> <span class="n">inside</span> <span class="o">--</span><span class="n">user</span> <span class="o">&lt;</span><span class="n">ssh</span> <span class="n">user</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">password</span> <span class="o">&lt;</span><span class="n">ssh</span> <span class="n">password</span><span class="o">&gt;</span> <span class="o">--</span><span class="n">hostname</span> <span class="n">limenurse</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Check that <a href="#id1"><span class="problematic" id="id2">`limelight-address.service`_</span></a> is enabled and active</p></li>
<li><p>Check that the eth0 and usb0 interfaces have the required ip address</p></li>
<li><p>Check that dnsmasq service is enabled and active</p></li>
<li><p>Check that <a href="#id3"><span class="problematic" id="id4">`limelight-dns.service`_</span></a> is enabled and active</p></li>
<li><p>Check that avahi-daemon is enabled and active</p></li>
<li><p>Check that python resolver runs</p></li>
<li><p>Check that the resolver log file exist and does not contain errors</p></li>
</ul>
<p>The third step shall be launched after the Transport Layer deployment has been performed</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scripts</span><span class="o">/</span><span class="mi">03</span><span class="o">-</span><span class="n">configure</span><span class="o">-</span><span class="n">routing</span><span class="o">-</span><span class="n">test</span><span class="o">.</span><span class="n">sh</span> <span class="o">--</span><span class="n">source</span> <span class="n">inside</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Check that <a class="reference external" href="../data/limelight-routing.service">limelight-routing.service</a> is enabled and active</p></li>
<li><p>Check that python forwarder runs</p></li>
<li><p>Check that the forwarder log file exist and does not contain errors</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Nadege Lemperiere.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
    /* Sidebar header (and topbar for mobile) */
    .wy-side-nav-search, .wy-nav-top {
      background: #2b2d2b;
    }
    /* Sidebar */
    .wy-nav-side {
      background: #2b2d2b;
    }
    /* Title color */
    .wy-menu-vertical header {
        color: #7ea351;
    }
    .wy-menu-vertical p.caption {
        color: #7ea351;
    }
    /* Links color */
    a {
        color: #7ea351;
    }
    a:hover {
        color: #7ea351;
    }
    a:visited{
        color: #fc9b67;
    }
    /* Table color */
    .wy-table thead {
        color: #7ea351;
    }
  </style>


</body>
</html>